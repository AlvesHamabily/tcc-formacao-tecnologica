<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cadastro</title>
<link rel="stylesheet" href="./css/style.css">
</head>
<body>

	<nav class="navebar">
		<div class="max-width">
			<div class="titulo">Crie sua Conta</div>
			<div class="lista">
				<ul>
					<a href="./index.html">Início</a>
					<a href="./login.html">Login</a>
					<a href="./cadastro.html">Cadastro</a>
				</ul>
			</div>
		</div>
	</nav>
	<main>
		<section class="cadastro">
			<div class="max-width">
				<div class="conteudo">
					<div class="conteudo_texto">
						<div class="texto_titulo">Cadastro</div>
						<div class="q-card">
							<div class="q-card-section">
								<form action="RegisterServlet" method="POST" onsubmit="return validarSenha()">
									<label for="nome">Nome:</label> <input type="text" id="nome"
										name="nome" required> <label for="email">E-mail:</label>
									<input type="email" id="email" name="email" required> <label
										for="senha">Senha:</label> <input type="password" id="senha"
										name="senha" required> <label for="confirmar_senha">Confirmar Senha:</label> <input type="password" id="confirmar_senha"
										name="confirmar_senha" required>

									<button type="submit" id="submit" class="btn-login">Cadastrar</button>
								</form>
							</div>
						</div>
						<br>
						<p>
							Já tem uma conta? <a href="./login.html">Faça login</a>
						</p>
					</div>
				</div>
			</div>
		</section>
	</main>
</body>
<script>
function senhaValida(p) {
    var letrasMaiusculas = /[A-Z]/;
    var letrasMinusculas = /[a-z]/;
    var numeros = /[0-9]/;
    var caracteresEspeciais = /[!@#$%^&*()\-_=+{};:,<.>]/; // Corrigido

    // Verifica o comprimento mínimo
    if (p.length < 8) {
        return false;
    }

    // Contadores
    var auxMaiuscula = 0;
    var auxMinuscula = 0;
    var auxNumero = 0;
    var auxEspecial = 0;

    for (var i = 0; i < p.length; i++) {
        if (letrasMaiusculas.test(p[i])) auxMaiuscula++;
        else if (letrasMinusculas.test(p[i])) auxMinuscula++;
        else if (numeros.test(p[i])) auxNumero++;
        else if (caracteresEspeciais.test(p[i])) auxEspecial++;
    }

    // Retorna verdadeiro se a senha atender a todos os critérios
    return auxMaiuscula > 0 && auxMinuscula > 0 && auxNumero > 0 && auxEspecial > 0;
}

function validarSenha() {
    var senha = document.getElementById("senha").value;
    var confirmarSenha = document.getElementById("confirmar_senha").value;

    if (senhaValida(senha)) {
        if (senha === confirmarSenha) {
            return true;
        } else {
            alert("As senhas não coincidem!");
            return false;
        }
    } else {
        alert("Senha fraca! A senha deve conter pelo menos 8 caracteres, incluindo letra maiúscula, minúscula, número e caractere especial.");
        return false;
    }
}
</script>
</html>